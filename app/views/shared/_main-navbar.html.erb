<div class="navbar-wagon-opaque">
  <!-- Logo -->
  <%= link_to root_path, class: "navbar-wagon-brand" do %>
    <i class="fa fa-film" aria-hidden="true" style="color: black;
    font-size: 25px; "></i>
  <% end %>



<!-- Right Navigation -->
  <div class="navbar-wagon-right hidden-xs hidden-sm">

    <% if user_signed_in? %>

    <!-- Profile picture and dropdown -->
   <div class="navbar-wagon-item">
        <div class="dropdown">
          <% if current_user.photo? %>
          <%= cl_image_tag current_user.photo.path, class: "avatar dropdown-toggle", id: "navbar-wagon-menu", "data-toggle" => "dropdown" %>
          <% else %>
            <%= image_tag "Underwood-placeholder.jpg", class: "avatar-large dropdown-toggle", id: "navbar-wagon-menu", "data-toggle" => "dropdown" %>
          <% end %>
          <ul class="dropdown-menu dropdown-menu-right navbar-wagon-dropdown-menu">
            <li>
              <%= link_to user_path(current_user) do %>
                <i class="fa fa-user"></i> <%= t(".profile", default: "Profile") %>
              <% end %>
            </li>
            <li>
              <%= link_to projections_path do %>
                <i class="fa fa-ticket"></i>  <%= t(".profile", default: "All Projections") %>
              <% end %>
            </li>
            <li>
              <%= link_to destroy_user_session_path, method: :delete do %>
                <i class="fa fa-sign-out"></i>  <%= t(".sign_out", default: "Log out") %>
              <% end %>
            </li>
          </ul>
        </div>
      </div>

      <%= link_to "Add a projection", new_projection_path, class: "navbar-wagon-item navbar-wagon-button " %>

      <% else %>

      <!-- Login text link -->
      <a href="#" class="navbar-wagon-link navbar-wagon-item" data-toggle="modal" data-target=".log-in-modal">Log in</a>

      <div class="modal fade log-in-modal" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel">
        <div class="modal-dialog modal-sm" role="document">
          <div class="modal-content">
          <h3 class="text-center">Log in</h3>
            <%= simple_form_for(resource, as: resource_name, url: session_path(resource_name)) do |f| %>
              <div class="form-inputs">
                <%= f.input :email, required: false, autofocus: true %>
                <%= f.input :password, required: false %>
                <%= f.input :remember_me, as: :boolean if devise_mapping.rememberable? %>
              </div>

              <div class="form-actions text-center">
                <%= f.button :submit, "Log in", class: "btn btn-danger"%>
            <% end %>
                <br>
              <%= link_to "Forgot your password?", new_password_path(resource_name) %>
              </div>
          </div>
      </div>
      </div>

      <!-- Sign up text link -->

      <a href="#" class="navbar-wagon-link navbar-wagon-item" data-toggle="modal" data-target=".sign-up-modal">Sign up</a>


      <div class="modal fade sign-up-modal" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel">
        <div class="modal-dialog modal-sm" role="document">
          <div class="modal-content">
          <h3 class="text-center">Sign up</h3>
           <%= simple_form_for(resource, as: resource_name, url: registration_path(resource_name)) do |f| %>
          <%= f.error_notification %>

          <!-- TODO: Birth date issue -->
          <div class="form-inputs">
            <%= f.input :first_name, required: true, autofocus: true %>
            <%= f.input :last_name, required: true %>
            <%= f.input :birth_date, required: true, as: :date, end_year: Date.today.year - 90,
                              order: [:day, :month, :year] %>
            <%= f.input :email, required: true %>
            <%= f.input :password, required: true, hint: ("#{@minimum_password_length} characters minimum" if @minimum_password_length) %>
            <%= f.input :password_confirmation, required: true %>
          </div>

          <div class="form-actions text-center" >
            <%= f.button :submit, "Sign up", class: "btn btn-danger btn-lg" %> <br>
        <% end %>
          </div>
          </div>
      </div>
      </div>

    <% end %>
  </div>

  <!-- Dropdown appearing on mobile only -->
  <div class="navbar-wagon-item hidden-md hidden-lg">
    <div class="dropdown">
      <i class="fa fa-bars dropdown-toggle" data-toggle="dropdown"></i>
      <ul class="dropdown-menu dropdown-menu-right navbar-wagon-dropdown-menu">
        <li><a href="#">Some mobile link</a></li>
        <li><a href="#">Other one</a></li>
        <li><a href="#">Other one</a></li>
      </ul>
    </div>
  </div>
</div>


